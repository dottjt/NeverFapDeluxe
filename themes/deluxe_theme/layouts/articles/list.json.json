{{ define "response" }}
  { 
  "title": {{ .Title | jsonify }},
  "description": {{ .Description | jsonify }},
  "content": {{ .Content | jsonify }},
  "date": {{ .Date.Format "2006-01-02" | jsonify }},
  "draft": {{ .Draft | jsonify }},
  "slug": {{ .Params.Slug | jsonify }},
  "categories": {{ .Params.Categories | jsonify }},
  "tags": {{ .Params.Tags | jsonify }},
  "permalink" : {{ .Permalink | jsonify }},
  "section": {{ .Section | jsonify }},
  "articles": [
    {{ range $index, $e := (where .Data.Pages "Section" "articles") }}
      {{ if ne .Slug "articles_page" }}
        {{ if $index }}, {{ end }}
        {
          "title": {{ .Title | jsonify }},
          "description": {{ .Description | jsonify }},
          "content": {{ .Content | jsonify }},
          "date": {{ .Date.Format "2006-01-02" | jsonify }},
          "draft": {{ .Draft | jsonify }},
          "slug": {{ .Params.Slug | jsonify }},
          "categories": {{ .Params.Categories | jsonify }},
          "tags": {{ .Params.Tags | jsonify }},
          "permalink" : {{ .Permalink | jsonify }},
          "section": {{ .Section | jsonify }},

          {{/* articles */}}
          "tldr1": {{ if .Params.Tldr1 }}{{ .Params.Tldr1 | jsonify }}{{ else }}""{{ end }},
          "tldr2": {{ if .Params.Tldr2 }}{{ .Params.Tldr2 | jsonify }}{{ else }}""{{ end }},
          "tldr3": {{ if .Params.Tldr3 }}{{ .Params.Tldr3 | jsonify }}{{ else }}""{{ end }},
          "tldr4": {{ if .Params.Tldr4 }}{{ .Params.Tldr4 | jsonify }}{{ else }}""{{ end }},
          "tldr5": {{ if .Params.Tldr5 }}{{ .Params.Tldr5 | jsonify }}{{ else }}""{{ end }}
        }
      {{ end }}
    {{ end }}
  ]
}
{{ end }}
